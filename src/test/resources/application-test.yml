spring:
  profiles:
    active: test
  
  datasource:
    # Will be overridden by Testcontainers
    url: jdbc:h2:mem:testdb
    username: sa
    password: 
    driver-class-name: org.h2.Driver
  
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: false
  
  flyway:
    enabled: false
  
  mail:
    host: localhost
    port: 2525
    username: test
    password: test
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false

logging:
  level:
    com.example.cifixer: DEBUG
    org.springframework.web: INFO
    org.hibernate: WARN
    org.testcontainers: WARN

cifixer:
  llm:
    endpoint: http://localhost:11434
    model: codellama
    timeout: 30
  
  github:
    api-url: https://api.github.com
    token: test-github-token
  
  jenkins:
    secret: test-jenkins-secret
  
  working-dir: /tmp/cifixer-test
  
  retry:
    max-attempts: 3
    delay-seconds: 1
  
  cleanup:
    enabled: false
    retention-days: 1

# Test-specific configurations
test:
  mock-servers:
    llm-port: 0  # Will be set dynamically
    github-port: 0  # Will be set dynamically
  
  performance:
    task-count: 100
    worker-count: 5
    timeout-seconds: 30
  
  fixtures:
    create-sample-data: true
    cleanup-after-test: true